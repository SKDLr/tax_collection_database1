<!DOCTYPE html>
<html lang="en">
<head>
        <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>National Tax - Create Records</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />



</head>

<body>
  <div>
  <div id="navbar-container"></div>
  </div>

  <div class="container mt-4">
    <h2 class="text-center mb-4">Add New Records</h2>

    <!-- Region Form -->
    <form id="regionForm" class="border p-4 rounded bg-light mb-4">
      <h4>Region</h4>
      <div class="mb-3">
        <label for="region_id" class="form-label">Region ID</label>
        <input type="number" class="form-control" id="region_id" required />
      </div>
      <div class="mb-3">
        <label for="region_name" class="form-label">Region Name</label>
        <input type="text" class="form-control" id="region_name" required />
      </div>
      <button type="submit" class="btn btn-success">Add Region</button>
      <div id="regionMsg" class="mt-2"></div>
    </form>

    <!-- Province Form -->
    <form id="provinceForm" class="border p-4 rounded bg-light mb-4">
      <p class="alert alert-warning">
        ⚠️ Please make sure the <strong>Region</strong> exists before adding a Province.
      </p>
      <h4>Province</h4>
      <div class="mb-3">
        <label for="province_id" class="form-label">Province ID</label>
        <input type="number" class="form-control" id="province_id" required />
      </div>
      <div class="mb-3">
        <label for="province_name" class="form-label">Province Name</label>
        <input type="text" class="form-control" id="province_name" required />
      </div>
      <div class="mb-3">
        <label for="province_region_id" class="form-label">Region ID</label>
        <input type="number" class="form-control" id="province_region_id" required />
      </div>
      <button type="submit" class="btn btn-success">Add Province</button>
      <div id="provinceMsg" class="mt-2"></div>
    </form>

    <!-- Taxpayer Form -->
    <form id="taxpayerForm" class="border p-4 rounded bg-light mb-4">
      <h4>Taxpayer</h4>
      <div class="mb-3">
        <label for="taxpayer_id" class="form-label">Taxpayer ID</label>
        <input type="number" class="form-control" id="taxpayer_id" required />
      </div>
      <div class="mb-3">
        <label for="full_name" class="form-label">Full Name</label>
        <input type="text" class="form-control" id="full_name" required />
      </div>
      <div class="mb-3">
        <label for="cnic" class="form-label">CNIC</label>
        <input type="text" class="form-control" id="cnic" required />
      </div>
      <div class="mb-3">
        <label for="contact" class="form-label">Contact</label>
        <input type="text" class="form-control" id="contact" required />
      </div>
      <div class="mb-3">
        <label for="address" class="form-label">Address</label>
        <input type="text" class="form-control" id="address" required />
      </div>
      <div class="mb-3">
        <label for="registration_date" class="form-label">Registration Date</label>
        <input type="date" class="form-control" id="registration_date" required />
      </div>
      <button type="submit" class="btn btn-success">Add Taxpayer</button>
      <div id="taxpayerMsg" class="mt-2"></div>
    </form>

    <!-- Tax Office Form -->
    <form id="officeForm" class="border p-4 rounded bg-light mb-4">
      <h4>Tax Office</h4>
      <input type="number" id="office_id" class="form-control mb-2" placeholder="Office ID" required />
      <input type="text" id="office_name" class="form-control mb-2" placeholder="Office Name" required />
      <input type="number" id="office_province_id" class="form-control mb-2" placeholder="Province ID" required />
      <input type="text" id="address" class="form-control mb-2" placeholder="Address" required />
      <button type="submit" class="btn btn-success">Add Office</button>
      <div id="officeMsg" class="mt-2"></div>
    </form>

    <!-- Tax Type Form -->
    <form id="taxTypeForm" class="border p-4 rounded bg-light mb-4">
      
      <h4>Tax Type</h4>
      <input type="number" id="tax_type_id" class="form-control mb-2" placeholder="Tax Type ID" required />
      <input type="text" id="tax_name" class="form-control mb-2" placeholder="Tax Name" required />
      <input type="text" id="description" class="form-control mb-2" placeholder="Description" required />
      <button type="submit" class="btn btn-success">Add Tax Type</button>
      <div id="taxTypeMsg" class="mt-2"></div>
    </form>

    <!-- Tax Return Form -->
    <form id="returnForm" class="border p-4 rounded bg-light mb-4">
      <p class="alert alert-warning">
        ⚠️ Please create both the <strong>Taxpayer</strong> and <strong>Tax Type</strong> first.
      </p>
      <h4>Tax Return</h4>
      <input type="number" id="return_id" class="form-control mb-2" placeholder="Return ID" required />
      <input type="number" id="return_taxpayer_id" class="form-control mb-2" placeholder="Taxpayer ID" required />
      <input type="number" id="return_tax_type_id" class="form-control mb-2" placeholder="Tax Type ID" required />
      <input type="text" id="fiscal_year" class="form-control mb-2" placeholder="Fiscal Year" required />
      <input type="date" id="return_date" class="form-control mb-2" placeholder="Return Date" required />
      <button type="submit" class="btn btn-success">Add Tax Return</button>
      <div id="returnMsg" class="mt-2"></div>
    </form>

    <!-- Payment Form -->
    <form id="paymentForm" class="border p-4 rounded bg-light mb-4">
      <p class="alert alert-warning">
        ⚠️ Please add the <strong>Tax Return</strong> first before recording a Payment.
      </p>

      <h4>Payment</h4>
      <input type="number" id="payment_id" class="form-control mb-2" placeholder="Payment ID" required />
      <input type="number" id="return_id_payment" class="form-control mb-2" placeholder="Return ID" required />
      <input type="number" id="amount_paid" class="form-control mb-2" placeholder="Amount Paid" required />
      <input type="date" id="payment_date" class="form-control mb-2" placeholder="Payment Date" required />
      <button type="submit" class="btn btn-success">Add Payment</button>
      <div id="paymentMsg" class="mt-2"></div>
    </form>

    <!-- Tax Rate Form -->
    <form id="rateForm" class="border p-4 rounded bg-light mb-4">
      <p class="alert alert-warning">
        ⚠️ Add the <strong>Tax Type</strong> first before setting a rate.
      </p>
      <h4>Tax Rate</h4>
      <input type="number" id="rate_id" class="form-control mb-2" placeholder="Rate ID" required />
      <input type="number" id="rate_tax_type_id" class="form-control mb-2" placeholder="Tax Type ID" required />
      <input type="text" id="rate_fiscal_year" class="form-control mb-2" placeholder="Fiscal Year" required />
      <input type="number" id="rate_percent" class="form-control mb-2" placeholder="Rate Percent" required />
      <button type="submit" class="btn btn-success">Add Tax Rate</button>
      <div id="rateMsg" class="mt-2"></div>
    </form>

    <!-- Official Form -->
    <form id="officialForm" class="border p-4 rounded bg-light mb-4">
      <p class="alert alert-warning">
        ⚠️ Please create the <strong>Tax Office</strong> first before assigning an Official.
      </p>

      <h4>Official</h4>
      <input type="number" id="official_id" class="form-control mb-2" placeholder="Official ID" required />
      <input type="text" id="name" class="form-control mb-2" placeholder="Name" required />
      <input type="text" id="designation" class="form-control mb-2" placeholder="Designation" required />
      <input type="number" id="official_office_id" class="form-control mb-2" placeholder="Office ID" required />
      <input type="date" id="hire_date" class="form-control mb-2" placeholder="Hire Date" required />
      <button type="submit" class="btn btn-success">Add Official</button>
      <div id="officialMsg" class="mt-2"></div>
    </form>

    <!-- Audit Form -->
    <form id="auditForm" class="border p-4 rounded bg-light mb-5">
      <p class="alert alert-warning">
        ⚠️ Please create both the <strong>Taxpayer</strong> and the <strong>Official</strong> before adding an Audit.
      </p>
      <h4>Audit</h4>
      <input type="number" id="audit_id" class="form-control mb-2" placeholder="Audit ID" required />
      <input type="number" id="audit_taxpayer_id" class="form-control mb-2" placeholder="Taxpayer ID" required />
      <input type="date" id="audit_date" class="form-control mb-2" placeholder="Audit Date" required />
      <input type="text" id="findings" class="form-control mb-2" placeholder="Findings" required />
      <input type="number" id="officer_id" class="form-control mb-2" placeholder="Officer ID" required />
      <button type="submit" class="btn btn-success">Add Audit</button>
      <div id="auditMsg" class="mt-2"></div>
    </form>

  </div>

  <script>
  const baseURL = 'https://effective-disco-v6vq4gxw679qhw4g5-6007.app.github.dev/'; // replace with your actual live port URL

  // Region Form Submission
  document.getElementById('regionForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = {
      region_id: document.getElementById('region_id').value,
      region_name: document.getElementById('region_name').value
    };
    const res = await fetch(`${baseURL}/regions`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    document.getElementById('regionMsg').innerText = res.ok ? '✅ Region added!' : '❌ Error adding region';
    if (res.ok) e.target.reset();
  });

  // Province Form Submission
  document.getElementById('provinceForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = {
      province_id: document.getElementById('province_id').value,
      province_name: document.getElementById('province_name').value,
      region_id: document.getElementById('province_region_id').value
    };
    const res = await fetch(`${baseURL}/provinces`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    document.getElementById('provinceMsg').innerText = res.ok ? '✅ Province added!' : '❌ Error adding province';
    if (res.ok) e.target.reset();
  });

  // Taxpayer Form Submission
  document.getElementById('taxpayerForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const data = {
      taxpayer_id: document.getElementById('taxpayer_id').value,
      full_name: document.getElementById('full_name').value,
      cnic: document.getElementById('cnic').value,
      contact: document.getElementById('contact').value,
      address: document.getElementById('address').value,
      registration_date: document.getElementById('registration_date').value
    };
    const res = await fetch(`${baseURL}/taxpayers`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    document.getElementById('taxpayerMsg').innerText = res.ok ? '✅ Taxpayer added!' : '❌ Error adding taxpayer';
    if (res.ok) e.target.reset();
  });
</script>

  <!-- Navbar Loader -->
  <script>
    fetch('navbar.html')
      .then(res => res.text())
      .then(html => document.getElementById('navbar-container').innerHTML = html);
  </script>

  <!-- Bootstrap JS Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- shsjs -->

</body>
</html>

